<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mock Greenhouse Application - Software Engineer at Acme Corp</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: -apple-system, system-ui, 'Helvetica Neue', Arial, sans-serif; background: #fff; color: #333; }
    #main { max-width: 680px; margin: 0 auto; padding: 32px 16px; }
    #app_header { margin-bottom: 32px; }
    #app_header h1 { font-size: 28px; color: #333; margin-bottom: 4px; }
    #app_header .company { font-size: 16px; color: #666; }
    #app_header .location { font-size: 14px; color: #999; margin-top: 4px; }
    #application_form { display: flex; flex-direction: column; gap: 24px; }
    .field { display: flex; flex-direction: column; gap: 4px; }
    .field label { font-size: 14px; font-weight: 600; color: #333; }
    .field label .required { color: #c0392b; }
    .field input[type="text"],
    .field input[type="email"],
    .field input[type="tel"],
    .field input[type="url"],
    .field select,
    .field textarea { padding: 10px 12px; border: 1px solid #ccc; border-radius: 4px; font-size: 14px; width: 100%; }
    .field input:focus, .field select:focus, .field textarea:focus { border-color: #3498db; outline: none; box-shadow: 0 0 0 2px rgba(52,152,219,0.2); }
    .field textarea { min-height: 100px; resize: vertical; }
    .field .help-text { font-size: 12px; color: #999; }
    .field-group { border: 1px solid #eee; border-radius: 8px; padding: 20px; }
    .field-group h3 { font-size: 16px; margin-bottom: 16px; color: #555; }
    .field-group .field { margin-bottom: 16px; }
    .field-group .field:last-child { margin-bottom: 0; }
    .file-upload { border: 2px dashed #ddd; border-radius: 8px; padding: 24px; text-align: center; cursor: pointer; }
    .file-upload:hover { border-color: #3498db; background: #f7fbff; }
    .file-upload input[type="file"] { display: none; }
    .checkbox-field { display: flex; align-items: flex-start; gap: 8px; }
    .checkbox-field input[type="checkbox"] { margin-top: 3px; }
    .eeoc-section { background: #f9f9f9; border-radius: 8px; padding: 20px; }
    .eeoc-section h3 { font-size: 16px; margin-bottom: 8px; }
    .eeoc-section p { font-size: 12px; color: #666; margin-bottom: 16px; }
    #submit_btn { background: #3498db; color: #fff; border: none; border-radius: 4px; padding: 12px 32px; font-size: 16px; font-weight: 600; cursor: pointer; align-self: flex-start; }
    #submit_btn:hover { background: #2980b9; }
    #submit_btn:disabled { background: #bdc3c7; cursor: not-allowed; }
  </style>
</head>
<body>
  <div id="main">
    <div id="app_header">
      <h1 data-test-field="jobTitle">Software Engineer</h1>
      <div class="company" data-test-field="company">Acme Corp</div>
      <div class="location" data-test-field="location">San Francisco, CA (Hybrid)</div>
    </div>

    <form id="application_form" data-test-form="greenhouse">
      <!-- Basic Info -->
      <div class="field-group" data-section="basic-info">
        <h3>Basic Information</h3>

        <div class="field">
          <label for="first_name">First Name <span class="required">*</span></label>
          <input type="text" id="first_name" name="first_name" required
            data-test-field="firstName" autocomplete="given-name" />
        </div>

        <div class="field">
          <label for="last_name">Last Name <span class="required">*</span></label>
          <input type="text" id="last_name" name="last_name" required
            data-test-field="lastName" autocomplete="family-name" />
        </div>

        <div class="field">
          <label for="email">Email <span class="required">*</span></label>
          <input type="email" id="email" name="email" required
            data-test-field="email" autocomplete="email" />
        </div>

        <div class="field">
          <label for="phone">Phone <span class="required">*</span></label>
          <input type="tel" id="phone" name="phone" required
            data-test-field="phone" autocomplete="tel" />
        </div>

        <div class="field">
          <label for="location_input">Location (City) <span class="required">*</span></label>
          <input type="text" id="location_input" name="location" required
            data-test-field="location" autocomplete="address-level2"
            placeholder="e.g. San Francisco, CA" />
        </div>
      </div>

      <!-- Resume -->
      <div class="field-group" data-section="resume">
        <h3>Resume/CV</h3>

        <div class="field">
          <label>Resume <span class="required">*</span></label>
          <div class="file-upload" data-test-field="resume">
            <input type="file" id="resume_file" name="resume" accept=".pdf,.doc,.docx,.txt,.rtf"
              data-test-field="resumeFile" />
            <label for="resume_file">
              <p>Attach resume/CV</p>
              <p class="help-text">PDF, DOC, DOCX, TXT, RTF (max 5MB)</p>
            </label>
          </div>
        </div>

        <div class="field">
          <label>Cover Letter</label>
          <div class="file-upload" data-test-field="coverLetterUpload">
            <input type="file" id="cover_letter_file" name="cover_letter_file" accept=".pdf,.doc,.docx,.txt,.rtf"
              data-test-field="coverLetterFile" />
            <label for="cover_letter_file">
              <p>Attach cover letter</p>
              <p class="help-text">PDF, DOC, DOCX, TXT, RTF (max 5MB)</p>
            </label>
          </div>
        </div>
      </div>

      <!-- Links -->
      <div class="field-group" data-section="links">
        <h3>Links</h3>

        <div class="field">
          <label for="linkedin_url">LinkedIn Profile</label>
          <input type="url" id="linkedin_url" name="linkedin_url"
            data-test-field="linkedinUrl" placeholder="https://linkedin.com/in/..." />
        </div>

        <div class="field">
          <label for="portfolio_url">Portfolio / Website</label>
          <input type="url" id="portfolio_url" name="portfolio_url"
            data-test-field="portfolioUrl" placeholder="https://..." />
        </div>

        <div class="field">
          <label for="github_url">GitHub Profile</label>
          <input type="url" id="github_url" name="github_url"
            data-test-field="githubUrl" placeholder="https://github.com/..." />
        </div>
      </div>

      <!-- Custom Questions -->
      <div class="field-group" data-section="custom-questions">
        <h3>Application Questions</h3>

        <div class="field">
          <label for="q_experience">How many years of professional software engineering experience do you have? <span class="required">*</span></label>
          <select id="q_experience" name="years_experience" required data-test-field="yearsExperience">
            <option value="">-- Select --</option>
            <option value="0-1">0-1 years</option>
            <option value="1-3">1-3 years</option>
            <option value="3-5">3-5 years</option>
            <option value="5-8">5-8 years</option>
            <option value="8+">8+ years</option>
          </select>
        </div>

        <div class="field">
          <label for="q_work_auth">Are you legally authorized to work in the United States? <span class="required">*</span></label>
          <select id="q_work_auth" name="work_authorization" required data-test-field="workAuthorization">
            <option value="">-- Select --</option>
            <option value="yes">Yes</option>
            <option value="no">No</option>
          </select>
        </div>

        <div class="field">
          <label for="q_sponsorship">Will you now or in the future require visa sponsorship? <span class="required">*</span></label>
          <select id="q_sponsorship" name="visa_sponsorship" required data-test-field="visaSponsorship">
            <option value="">-- Select --</option>
            <option value="yes">Yes</option>
            <option value="no">No</option>
          </select>
        </div>

        <div class="field">
          <label for="q_salary">Desired salary (USD)</label>
          <input type="text" id="q_salary" name="desired_salary"
            data-test-field="desiredSalary" placeholder="e.g. $150,000" />
        </div>

        <div class="field">
          <label for="q_why">Why are you interested in this role? <span class="required">*</span></label>
          <textarea id="q_why" name="why_interested" required
            data-test-field="whyInterested" maxlength="3000"
            placeholder="Tell us why you're excited about this opportunity..."></textarea>
          <span class="help-text">Max 3,000 characters</span>
        </div>

        <div class="field">
          <label for="q_start_date">Earliest start date <span class="required">*</span></label>
          <input type="text" id="q_start_date" name="start_date" required
            data-test-field="startDate" placeholder="e.g. March 2026" />
        </div>
      </div>

      <!-- EEO (Voluntary) -->
      <div class="eeoc-section" data-section="eeoc">
        <h3>Equal Employment Opportunity (Voluntary)</h3>
        <p>Acme Corp is an equal opportunity employer. The following questions are voluntary and will not affect your application.</p>

        <div class="field">
          <label for="eeoc_gender">Gender</label>
          <select id="eeoc_gender" name="eeoc_gender" data-test-field="eeocGender">
            <option value="">-- Select --</option>
            <option value="male">Male</option>
            <option value="female">Female</option>
            <option value="nonbinary">Non-binary</option>
            <option value="decline">Decline to self-identify</option>
          </select>
        </div>

        <div class="field">
          <label for="eeoc_race">Race/Ethnicity</label>
          <select id="eeoc_race" name="eeoc_race" data-test-field="eeocRace">
            <option value="">-- Select --</option>
            <option value="asian">Asian</option>
            <option value="black">Black or African American</option>
            <option value="hispanic">Hispanic or Latino</option>
            <option value="native">Native American or Alaska Native</option>
            <option value="pacific">Native Hawaiian or Other Pacific Islander</option>
            <option value="white">White</option>
            <option value="two_or_more">Two or More Races</option>
            <option value="decline">Decline to self-identify</option>
          </select>
        </div>

        <div class="field">
          <label for="eeoc_veteran">Veteran Status</label>
          <select id="eeoc_veteran" name="eeoc_veteran" data-test-field="eeocVeteran">
            <option value="">-- Select --</option>
            <option value="protected">I am a protected veteran</option>
            <option value="not_protected">I am not a protected veteran</option>
            <option value="decline">Decline to self-identify</option>
          </select>
        </div>

        <div class="field">
          <label for="eeoc_disability">Disability Status</label>
          <select id="eeoc_disability" name="eeoc_disability" data-test-field="eeocDisability">
            <option value="">-- Select --</option>
            <option value="yes">Yes, I have a disability (or previously had)</option>
            <option value="no">No, I don't have a disability</option>
            <option value="decline">Decline to self-identify</option>
          </select>
        </div>
      </div>

      <!-- Consent & Submit -->
      <div class="field">
        <div class="checkbox-field">
          <input type="checkbox" id="data_consent" name="data_consent" required
            data-test-field="dataConsent" />
          <label for="data_consent">I acknowledge that I have read and consent to the <a href="#">Privacy Policy</a>. <span class="required">*</span></label>
        </div>
      </div>

      <button type="submit" id="submit_btn" data-test-action="submit">Submit Application</button>
    </form>
  </div>

  <!-- Test instrumentation: records all form interactions for assertion -->
  <script>
    window.__mockAtsLog = [];
    window.__mockAtsType = 'greenhouse';
    window.__mockAtsVersion = '1.0';

    function logInteraction(action, field, value) {
      window.__mockAtsLog.push({
        timestamp: Date.now(),
        action: action,
        field: field,
        value: value,
      });
    }

    // Track all input changes
    document.querySelectorAll('input, select, textarea').forEach(function(el) {
      el.addEventListener('change', function() {
        logInteraction('change', el.name || el.id, el.type === 'checkbox' ? el.checked : el.value);
      });
      el.addEventListener('input', function() {
        if (el.type !== 'file') {
          logInteraction('input', el.name || el.id, el.value);
        }
      });
    });

    // Track file uploads
    document.querySelectorAll('input[type="file"]').forEach(function(el) {
      el.addEventListener('change', function() {
        var files = Array.from(el.files || []).map(function(f) {
          return { name: f.name, size: f.size, type: f.type };
        });
        logInteraction('file_upload', el.name || el.id, files);
      });
    });

    // Track form submission
    document.getElementById('application_form').addEventListener('submit', function(e) {
      e.preventDefault();
      var formData = new FormData(e.target);
      var data = {};
      formData.forEach(function(value, key) { data[key] = value; });
      logInteraction('submit', 'form', data);
      window.__mockAtsSubmitted = true;
      window.__mockAtsFormData = data;

      // Show confirmation
      document.getElementById('submit_btn').textContent = 'Application Submitted!';
      document.getElementById('submit_btn').disabled = true;
    });
  </script>
</body>
</html>
